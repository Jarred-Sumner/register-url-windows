var d=Object.create,c=Object.defineProperty,w=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty,_=Object.getOwnPropertyNames,x=Object.getOwnPropertyDescriptor;var m=e=>c(e,"__esModule",{value:!0});var y=(e,r)=>{for(var o in r)c(e,o,{get:r[o],enumerable:!0})},b=(e,r,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of _(r))!R.call(e,n)&&n!=="default"&&c(e,n,{get:()=>r[n],enumerable:!(o=x(r,n))||o.enumerable});return e},l=e=>e&&e.__esModule?e:b(m(c(e!=null?d(w(e)):{},"default",{value:e,enumerable:!0})),e);m(exports);y(exports,{installBin:()=>v,register:()=>E});var g=l(require("child_process")),a=l(require("path")),p=l(require("fs")),h=l(require("which")),P=a.join(__dirname,"../bin","elevate","elevate.cmd");async function v(){let e=await h.default("npm");return new Promise((r,o)=>{let n=g.default.exec(`"${e}" install register-url-win64-bin@1.0.0`,{cwd:a.resolve(__dirname)},(s,f,i)=>s?o(s):r({stdout:f,stderr:i}));n.stdout.pipe(process.stdout),n.stdin.pipe(process.stdin)})}async function E(e){let r;try{r=require("register-url-win64-bin")}catch(o){return Promise.reject(`Please install "register-url-win64-bin" into ${a.resolve(__dirname)} before running this function. For convienience, you can call installBin()`)}return await p.promises.access(r,p.constants.F_OK),typeof e.register=="undefined"&&(e.register=!0),new Promise((o,n)=>{g.default.exec(`"${P}" "${r}" ${JSON.stringify(JSON.parse(JSON.stringify(e)))}`,{env:process.env},(s,f,i)=>{if(s){o({error:s.message,exception:s,chrome:!1,edge:!1,protocol:!1});return}let t;try{t=JSON.parse(f)}catch(u){process.env.NODE_ENV==="development"&&console.error(u),o(i?{error:i,chrome:!1,edge:!1,protocol:!1}:{error:"Unknown error ocurred",chrome:!1,edge:!1,protocol:!1});return}t.error&&!t.error.trim().length&&(t.error=!1),(i==null?void 0:i.length)&&!t.error&&(t.error=i),o(t)})})}
